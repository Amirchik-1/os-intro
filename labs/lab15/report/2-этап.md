---
## Front matter
title: "Отчет № 2 по выполнению курса на онлайн платформе Stepik.org"
subtitle: "Введение в Linux. Часть 2."
author: "Зарифбеков Амир Пайшанбиевич. НБИбд-01-22"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures

fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы

	Целью второго блока "Работа на сервере" является:
 
1. Научиться работать на удаленных серверах.
2. Посмотреть ряд примеров с использованием биоинформатических программ.
3. Изучить что такое сервер и зачем на нем работать. 
4. Рассмотреть два способа как войти на удаленный сервер с помощью терминала.

# Задание

	Для изучения и выполнения практических заданий нам дается 7 мини-блоков в нашем большом блоке "Работа на сервере". Нам нужно просмотреть теоретические видео и выполнить тестовые задания. 

# Теоретическое введение

	Для полноценной работы на удаленном сервере нужно уметь не только заходить на него с компьютера-клиента, но и обмениваться файлами как в одну, так и в другую сторону, запускать приложения на нем и тд. Обычно на сервере могут одновременно работать очень много пользователей. Кроме того, каждый из них может загружать сервер множеством задач. Чтобы не мешать друг другу, каждый пользователь должен уметь контролировать все запущенные им программы. 


# Выполнение заданий Stepik. Работа на сервисе.

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:001).

	Для начала мы додлжны изучить, что такое сервер и зачем на нем работать. Кроме того, мы рассмотрим два способа войти на удаленный сервер с помощью терминала. 

	Первый вопрос в блоке **"Знакомство с сервером":**
	
	Для каких задач можно использовать удаленный сервер?

![Удаленный сервер](image/1.png){#fig:001 width=70%}

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:002).

	Предположим программа ssh-keygen создала вам два ключа: id_rsa и id_rsa.pub. Какой из этих ключей можно без опаски пересылать по интернету?

![Ключ](image/2.png){#fig:002 width=70%} 


Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:003).

	Переходим к следующему мини-блоку **"Обмен файлами"**. После изучения теории решаем три тестовых задания и одно практическое
	
	Какая команда скопирует на сервер (в домашнюю директорию) папку stepic вместе с содержимым ее самой и всех ее подпапок?

![Команда копирования на сервер](image/3.png){#fig:003 width=70%} 

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:004).

	Предположим, что вы устанавливаете программу program на свой компьютер при помощи команды sudo apt-get install program. Терминал сообщает вам, что он не может найти и скачать установочный пакет. Какие действия могут устранить проблему?

![устранить проблему](image/4.png){#fig:004 width=70%} 

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:005).

	Для чего можно использовать программу Filezilla?

![Filezilla](image/5.png){#fig:005 width=70%} 

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:006).

	Практическое задание в терминале: Для начала выполнения нажмите кнопку "Open Terminal". Открывшийся в браузере терминал будем называть "локальный". Скопируйте при помощи SCP с удаленного сервера server1.stepik-local все файлы из директории /srv/files_on_server/ в локальную директорию /home/box/files_on_client/ (её нужно будет еще создать!). Для доступа к серверу используйте логин box и пароль supersecret, а порт указывать не нужно -- используется порт по умолчанию.


	Выполнение:

![Работа с документом](image/6.png){#fig:006 width=70%} 


Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:007).

	Для полноценной работы на сервере нужно уметь не только зайти на него и обменяться с ним файлами, но и запускать приложения на нем. В мини-блок **"Запуск приложений"** рассмотрим запуск программ, которые обычно требуют графический вывод.
	
	Что можно сделать, если требуется запустить на сервере программу, для работы которой нужен не терминал, а экран?


![Запуск программы для которой нужен экран](image/7.png){#fig:007 width=70%} 

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:008).

Как обычно можно вызвать справочную информацию о программе program?	


![program](image/8.png){#fig:008 width=70%} 

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:009).

	Посмотрите справку по программе FastQC (имеется ввиду вариант для запуска в терминале) и определите, какие форматы данных он может принимать на вход.

Если вы хотите попробовать запустить FastQC на каких-то реальных данных, то можете попробовать на этом файле.

![FastQC](image/9.png){#fig:009 width=70%} 

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:010).

	Clustal - это одна из самых широко используемых компьютерных программ для множественного выравнивания нуклеотидных и аминокислотных последовательностей (multiple sequence alignment). У нее есть графическая версия ClustalX и версия для запуска в терминале ClustalW. 
	Посмотрим справку по программе (имеется в виду версия для терминала) и впишем в поле ниже команду, которая запускает в терминале Clustal на файле test.fasta и выполняет множественное выравнивание (multiple alignment). 


![Clustal](image/10.png){#fig:010 width=70%} 

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:011).

	Обычно на сервере могут одновременно работать очень много пользователей. Кроме того, каждый из них может загружать сервер множеством задач. Чтобы не мешать друг другу, каждый пользователь должен уметь контролировать все запущенные им программы.
	
	Предположим вы запустили программы program1, program2 и program3 в фоновом режиме. После этого вы выполнили следующие действия:
	fg %1
	Ctrl+С
	fg %2
	Ctrl+Z
	jobs

	Информация о каких программах будет показана при выполнении команды jobs?


![jobs](image/11.png){#fig:011 width=70%} 

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:012).

	jobs, top и ps позволяют отслеживать работу запущенных в терминале программ. В каждой из этих трех утилит для каждой запущенной программы указывается число-идентификатор. Одинаковые ли эти идентификаторы в  jobs, top и ps?

![Идентификаторы в  jobs, top и ps](image/12.png){#fig:012 width=70%} 

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:013).

	С помощью какой команды можно мгновенно завершить остановленный процесс?

![Команда для мгновенного завершения остановленного процесса](image/13.png){#fig:013 width=70%} 

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:014).

	Что произойдет, если использовать kill (без опций) по отношению к процессу, который был приостановлен при помощи Ctrl+Z?

![kill по отношению к процессу, приостановленный при помощи Ctrl+Z](image/14.png){#fig:014 width=70%} 

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:015).

	Следующий мини-блок **"Многопоточные приложения"** научит нас понятию потоков и процессов, без которых практически невозможно представить обработку больших объемов данных. Запуск и контроль многопоточного приложения будет рассмотрен на примере программы bowtie2.


	Сколько вычислительных ресурсов центрального процессора (% CPU) использует остановленное (по Ctrl+Z) многопоточное приложение?

![Вычислительные ресурсы](image/15.png){#fig:015 width=70%} 

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:016).


	Сколько памяти занимает остановленное (по Ctrl+Z) многопоточное приложение?

![Память](image/16.png){#fig:016 width=70%} 

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:017).

	Как принудительно завершить один из потоков запущенного многопоточного приложения?

![Потоки запущенного многопоточного приложения](image/17.png){#fig:017 width=70%} 

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:018).

	Какой(ие) из этих шагов можно выполнить в несколько потоков?


![Несколько потоков](image/18.png){#fig:018 width=70%} 

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:019).

	Скачайте файлы, необходимые для запуска bowtie2: референсный геном (reference) и риды (reads). Запустите программу bowtie2 на этих данных (напоминаем, что запуск состоит из двух этапов!). Вывод stderr второго этапа (т.е. запуск подпрограммы bowtie2) запишите в файл (см. занятие про перенаправление ввода/вывода) и загрузите его в форму ниже. 


![Работа с файлами](image/19.png){#fig:019 width=70%} 

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:020).
	
	Следующая задача в мини-блоке **"Менеджер терминалов tmux"** является рассмоnh менеджерf терминалов tmux. Это специальная программа, которая может объединять в себе несколько терминалов, каждый из которых содержит свои процессы. Важная особенность tmux заключается в том, что если запустить его на сервере, то он будет помнить историю запусков процессов и они продолжат выполнение даже если соединение с сервером будет потеряно. Кроме того, при новом соединении с сервером можно будет подключиться к уже запущенному tmux и продолжить работу с момента потери связи. 

	Вы открыли две вкладки в терминале. В одной из них вы запустили процесс и приостановили его. Переключившись во вторую вкладку и набрав fg, вы добьетесь следующего:

![fg](image/20.png){#fig:020 width=70%} 

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:021).

	Предположим, что в tmux осталась последняя открытая вкладка. Что произойдет, если вы введете в этой вкладке в командную строку команду exit?

![exit](image/21.png){#fig:021 width=70%}
 
Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:022).

	Предположим, что вы открыли терминал, зашли в нем на сервер, запустили на этом сервере tmux и начали работу в нем. Что произойдет, если вы теперь закроете терминал?

![Закрытие терминала](image/22.png){#fig:022 width=70%} 

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:023).

	Что произойдет, если запустить процесс в фоновом режиме в одной из вкладок tmux, а затем принудительно закрыть эту вкладку (Ctrl+B, X)?

![Работа с tmux](image/23.png){#fig:023 width=70%} 

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:024).
	Изучите справку по tmux (например, man tmux) и выберите из предложенных ниже tmux-команд ту, которая отвечает за переименование текущей вкладки. 


![man tmux](image/24.png){#fig:024 width=70%} 

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:025).

	Задание на самостоятельное изучение tmux.

	Кроме создания нескольких вкладок, tmux умеет еще и разделять (split) одну вкладку на несколько, например, горизонтальной чертой на верхнюю и нижнюю или вертикальной чертой на левую и правую. Разделение может быть полезно, например, чтобы запустить процесс в верхней половине вкладки, а продолжить работу в нижней и одновременно следить за тем, что происходит с процессом. Для "горизонтального" разделения используется (Ctrl+B и "), а для "вертикального" -- (Ctrl+B и %).

![Работа с tmux](image/25.png){#fig:025 width=70%} 

Описываются проведённые действия, в качестве иллюстрации даётся ссылка на иллюстрацию (рис. @fig:026).

	Мини-блок **"Как установить Linux: расширенное руководство"**. Данный блок предназначен для тех, кто устанавливал Linux на свой компьютер при помощи VirtualBox. 

На этом занятии вы узнаете:

    как полноценно установить Linux на ваш компьютер (т.е. без виртуальных машин),
    как использовать виртуальную машину, но поставить туда более новый Linux, чем предлагается на первой неделе курса
    как настроить VirtualBox для более удобной работы (растягивать окошко виртуальной машины на весь экран, обмениваться файлами между основной системой и Linux, копировать текст между системами).

	Для большинства настроек VirtualBox нужно установить так называемые Гостевые дополнения (Guest Additions). Чтобы сделать это, нужно открыть виртуальную машину и в меню VirtualBox этой машины выбрать Devices (Устройства) --> Insert Guest Addition CD image... (Вставить диск с Гостевыми дополнениями...). В самой виртуальной машине нужно согласиться на автозапуск диска в терминале.

	Для настойки развертывания виртуальной машины на весь экран достаточно перезагрузить её после установки дополнений.



# Выводы

	Курс знакомит слушателей с операционной системой Linux и основами её использования. В рамках второго блока курса мы научились работать на удаленном сервере. Мы научились заходить на него, запускать различные программы удаленно, а также копировать результаты их выполнения на свой локальный компьютер для дальнейшего анализа.

# Используемые ресурсы

**Введение в Linux** https://stepik.org/course/73

